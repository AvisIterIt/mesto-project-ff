(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(e,t){e.target.closest(".card").remove(),fetch("https://nomoreparties.co/v1/wff-cohort-23/cards/".concat(t),{method:"DELETE",headers:{authorization:"98880455-a778-400c-9f69-6ddd0f45b45d","Content-Type":"application/json"}}).then((function(e){return e.json()})).catch((function(e){return console.error("Error:",e)}))}e.d({},{hL:()=>E,UY:()=>A,eG:()=>P}),fetch("https://nomoreparties.co/v1/wff-cohort-23/cards",{headers:{authorization:"98880455-a778-400c-9f69-6ddd0f45b45d"}}).then((function(e){return e.json()})).then((function(e){e.forEach((function(e){var n=o(e,t,A,r);E.append(n)}))}));var n="11652fa9f797299912f1b273";function o(e,t,o,r){var c=document.querySelector("#card-template").content.cloneNode(!0),u=c.querySelector(".card__title"),a=c.querySelector(".card__image"),i=c.querySelector(".card__delete-button"),s=c.querySelector(".card__like-button");e.likes.some((function(e){return e._id===n}))&&s.classList.add("card__like-button_is-active");var d=c.querySelector(".card__like-count");return e.owner._id!==n&&i.remove(),u.textContent=e.name,a.src=e.link,a.alt=e.name,d.textContent=e.likes.length,i.addEventListener("click",(function(n){return t(n,e._id)})),a.addEventListener("click",(function(){return o(e.link,e.name)})),s.addEventListener("click",(function(t){return r(t,e,d)})),c}function r(e,t,n){var o=Number(n.textContent)||0,r=e.target;r.classList.toggle("card__like-button_is-active");var c=r.classList.contains("card__like-button_is-active");c?o+=1:o-=1,n.textContent=o,function(e,t){var n=e?"PUT":"DELETE";fetch("https://nomoreparties.co/v1/wff-cohort-23/cards/likes/".concat(t),{method:n,headers:{authorization:"98880455-a778-400c-9f69-6ddd0f45b45d"}}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).catch((function(e){return console.error("Error:",e)}))}(c,t._id)}var c=function(e){e.classList.add("popup_is-opened"),e.classList.add("popup_is-animated"),document.addEventListener("keydown",u)};function u(e){if("Escape"===e.key){var t=document.querySelector(".popup_is-opened");a(t)}}var a=function(e){e.classList.remove("popup_is-opened"),document.removeEventListener("keydown",u)};function i(e,t){e.currentTarget===e.target&&a(t)}var s,d,p,l,f=document.querySelector(".profile__edit-button"),_=document.querySelector(".profile__add-button"),m=document.querySelector(".profile__image"),v=document.querySelector(".popup_type_edit"),y=document.querySelector(".popup_type_new-card"),h=document.querySelector(".popup_type_avatar"),S=v.querySelector(".popup__form"),b=document.querySelector(".popup__input_type_card-name"),q=document.querySelector(".popup__input_type_url"),E=document.querySelector(".places__list"),C=document.querySelector(".popup__input_type_name"),L=document.querySelector(".popup__input_type_description"),k=document.querySelector('.popup__form[name="new-place"]'),g=document.querySelector(".profile__title"),x=document.querySelector(".profile__description"),j=document.querySelector(".popup_type_image"),w=document.querySelector(".popup__image"),T=document.querySelector(".popup__caption"),P=document.querySelector(".button"),z=document.querySelector(".popup_type_avatar").querySelector(".popup__form"),O=z.querySelector(".popup__input_type_url");function A(e,t){w.src=e,T.alt=t,T.textContent=t,c(j)}f.addEventListener("click",(function(){C.value=g.textContent,L.value=x.textContent,c(v)})),_.addEventListener("click",(function(){c(y)})),m.addEventListener("click",(function(){c(h)})),v.querySelector(".popup__close").addEventListener("click",(function(){a(v)})),y.querySelector(".popup__close").addEventListener("click",(function(){a(y)})),j.querySelector(".popup__close").addEventListener("click",(function(){a(j)})),h.querySelector(".popup__close").addEventListener("click",(function(){a(h)})),v.addEventListener("click",(function(e){return i(e,v)})),y.addEventListener("click",(function(e){return i(e,y)})),j.addEventListener("click",(function(e){return i(e,j)})),h.addEventListener("click",(function(e){return i(e,h)})),S.addEventListener("submit",(function(e){e.preventDefault();var t=C.value,n=L.value;P.textContent="Сохранение...",P.disabled=!0,g.textContent=t,x.textContent=n,function(e,t){fetch("https://nomoreparties.co/v1/wff-cohort-23/users/me",{method:"PATCH",headers:{authorization:"98880455-a778-400c-9f69-6ddd0f45b45d","Content-Type":"application/json"},body:JSON.stringify({name:e,about:t})}).then((function(e){return e.json()})).catch((function(e){return console.error("Error:",e)})).finally((function(){P.textContent="Сохранить",P.disabled=!1}))}(t,n),a(v)})),k.addEventListener("submit",(function(e){e.preventDefault();var c,u=b.value,i=q.value;P.textContent="Сохранение...",P.disabled=!0,c=o({name:u,link:i,likes:[],owner:{name:g.textContent,about:x.textContent,_id:n,cohort:"wff-cohort-23",avatar:""}},t,(function(){A(i,u)}),r),E.prepend(c),function(e,t){fetch("https://nomoreparties.co/v1/wff-cohort-23/cards",{method:"POST",headers:{authorization:"98880455-a778-400c-9f69-6ddd0f45b45d","Content-Type":"application/json"},body:JSON.stringify({name:e,link:t})}).then((function(e){return e.json()})).catch((function(e){return console.error("Error:",e)})).finally((function(){P.textContent="Сохранить",P.disabled=!1}))}(u,i),k.reset(),a(y)})),s={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup_error_visible"},document.querySelectorAll(s.formSelector).forEach((function(e){var t=e.querySelectorAll(s.inputSelector),n=e.querySelector(s.submitButtonSelector);t.forEach((function(t){var o=e.querySelector(".".concat(t.id,"-error"));t.addEventListener("input",(function(){var e=t.value,r="";!function(e){return 0===e.length}(e)?e.length<2?r="Длина должна быть больше 1 символа":function(e,t){return e.test(t)}(new RegExp(t.pattern),e)||(r=t.getAttribute("data-error-message")):r="Вы пропустили это поле.",r?(t.classList.add(s.inputErrorClass),n.classList.add(s.inactiveButtonClass),o.classList.add(s.errorClass),o.textContent=r):(n.classList.remove(s.inactiveButtonClass),t.classList.remove(s.inputErrorClass),o.classList.remove(s.errorClass),o.textContent="")}))}))})),z.addEventListener("submit",(function(e){var t;e.preventDefault(),t=O.value,fetch("https://nomoreparties.co/v1/wff-cohort-23/users/me/avatar",{method:"PATCH",headers:{authorization:"98880455-a778-400c-9f69-6ddd0f45b45d","Content-Type":"application/json"},body:JSON.stringify({avatar:t})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).then((function(e){document.querySelector(".profile__image").style.backgroundImage="url(".concat(e.avatar,")")})).catch((function(e){return console.error("Error:",e)})),a(h)})),d=document.querySelector(".profile__title"),p=document.querySelector(".profile__description"),l=document.querySelector(".profile__image"),fetch("https://nomoreparties.co/v1/wff-cohort-23/users/me",{method:"get",headers:{authorization:"98880455-a778-400c-9f69-6ddd0f45b45d","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){d.textContent=e.name,p.textContent=e.about,l.style.backgroundImage="url(".concat(e.avatar,")")}))})();